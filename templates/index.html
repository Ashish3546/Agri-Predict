<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgriPredict - Smart Farming Solutions</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" style="background: linear-gradient(135deg, #667eea, #764ba2);">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#home">
                <i class="fas fa-seedling me-2"></i>AgriPredict
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#dashboard">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#weather-map">Weather Map</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#plant-analysis">Plant Analysis</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#basic-data">Basic Data</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#research">Research</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero-section">
        <div class="container">
            <div class="row align-items-center min-vh-100">
                <div class="col-lg-6" data-aos="fade-right">
                    <h1 class="display-3 fw-bold text-white mb-4">
                        Smart Crop <span class="text-warning">Insights</span> for Modern Farmers
                    </h1>
                    <p class="lead text-white mb-4">
                        Helping farmers with smart crop insights, soil data, irrigation suggestions, 
                        and location-specific predictions powered by AI and satellite technology.
                    </p>
                    <div class="hero-buttons">
                        <a href="#dashboard" class="btn btn-warning btn-lg me-3">
                            <i class="fas fa-chart-line"></i> Start Analysis
                        </a>
                        <a href="#basic-data" class="btn btn-outline-light btn-lg">
                            <i class="fas fa-book"></i> Learn More
                        </a>
                    </div>
                </div>
                <div class="col-lg-6" data-aos="fade-left">
                    <div class="hero-image">
                        <img src="https://images.unsplash.com/photo-1574323347407-f5e1ad6d020b?w=600&h=400&fit=crop" 
                             class="img-fluid rounded-3 shadow-lg" alt="Smart Agriculture">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Technology Features Section -->
    <section class="features-section py-5" data-aos="fade-up">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center mb-5">
                    <h2 class="display-5 fw-bold">Powered by Advanced Technology</h2>
                    <p class="lead text-muted">Integrating cutting-edge agricultural technologies for precise farming decisions</p>
                </div>
            </div>
            <div class="row g-4">
                <div class="col-md-4" data-aos="zoom-in" data-aos-delay="100">
                    <div class="feature-card text-center h-100">
                        <div class="feature-icon bg-primary">
                            <i class="fas fa-satellite"></i>
                        </div>
                        <h4 class="mb-3">Google Earth Engine</h4>
                        <p class="text-muted">Real-time satellite imagery and NDVI data for crop health monitoring and yield prediction.</p>
                    </div>
                </div>
                <div class="col-md-4" data-aos="zoom-in" data-aos-delay="200">
                    <div class="feature-card text-center h-100">
                        <div class="feature-icon bg-success">
                            <i class="fas fa-database"></i>
                        </div>
                        <h4 class="mb-3">Kaggle Datasets</h4>
                        <p class="text-muted">Comprehensive agricultural datasets including postal codes, crop production, and soil data.</p>
                    </div>
                </div>
                <div class="col-md-4" data-aos="zoom-in" data-aos-delay="300">
                    <div class="feature-card text-center h-100">
                        <div class="feature-icon bg-warning">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <h4 class="mb-3">Climate-Smart Agriculture</h4>
                        <p class="text-muted">Weather-based recommendations and climate adaptation strategies for sustainable farming.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Dashboard Section -->
    <section id="dashboard" class="dashboard-section py-5">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center mb-5">
                    <h2 class="display-5 fw-bold">Farmer Dashboard</h2>
                    <p class="lead text-muted">Enter your farm details for AI-powered crop yield predictions</p>
                </div>
            </div>
            
            <div class="row">
                <!-- Farm Information Form -->
                <div class="col-12 mb-5">
                    <div class="card shadow fade-in-up">
                        <div class="card-header bg-primary text-white">
                            <h5><i class="fas fa-map-marker-alt"></i> Farm Information</h5>
                        </div>
                        <div class="card-body">
                            <form id="farmerForm">
                                <div class="row">
                                    <div class="col-md-6 mb-3 position-relative">
                                        <label class="form-label fw-bold">
                                            <i class="fas fa-map-pin"></i> Location
                                        </label>
                                        <input type="text" class="form-control" id="location" 
                                               placeholder="Type your village, city, or district..." 
                                               autocomplete="off" required>
                                        <div id="locationSuggestions" class="location-suggestions"></div>
                                        <small class="text-muted">
                                            <i class="fas fa-satellite"></i> Powered by Google Earth Engine & Kaggle datasets
                                        </small>
                                    </div>
                                    
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label fw-bold">
                                            <i class="fas fa-seedling"></i> Crop Type
                                        </label>
                                        <select class="form-select" id="cropType" required>
                                            <option value="">Select Crop</option>
                                            <option value="rice">Rice</option>
                                            <option value="wheat">Wheat</option>
                                            <option value="maize">Maize</option>
                                            <option value="cotton">Cotton</option>
                                            <option value="sugarcane">Sugarcane</option>
                                            <option value="soybean">Soybean</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <label class="form-label fw-bold">
                                            <i class="fas fa-ruler-combined"></i> Land Size
                                        </label>
                                        <input type="number" class="form-control" id="landSize" 
                                               value="2" min="0.1" step="0.1" required>
                                    </div>
                                    <div class="col-md-2 mb-3">
                                        <label class="form-label fw-bold">Unit</label>
                                        <select class="form-select" id="landUnit">
                                            <option value="hectares">Hectares</option>
                                            <option value="acres">Acres</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label class="form-label fw-bold">
                                            <i class="fas fa-mountain"></i> Soil Type
                                        </label>
                                        <select class="form-select" id="soilType" required>
                                            <option value="">Select Soil Type</option>
                                            <option value="alluvial">Alluvial Soil</option>
                                            <option value="black">Black Soil</option>
                                            <option value="red">Red Soil</option>
                                            <option value="laterite">Laterite Soil</option>
                                            <option value="loamy">Loamy Soil</option>
                                            <option value="clay">Clay Soil</option>
                                            <option value="sandy">Sandy Soil</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label class="form-label fw-bold">
                                            <i class="fas fa-tint"></i> Irrigation Method
                                        </label>
                                        <select class="form-select" id="irrigationMethod" required>
                                            <option value="">Select Irrigation</option>
                                            <option value="rainfed">Rainfed</option>
                                            <option value="canal">Canal Irrigation</option>
                                            <option value="tube_well">Tube Well</option>
                                            <option value="drip">Drip Irrigation</option>
                                            <option value="sprinkler">Sprinkler</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="text-center">
                                    <button type="submit" class="btn btn-success btn-lg">
                                        <i class="fas fa-chart-line"></i> Analyze & Predict Yield
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Results Section -->
                <div class="col-12" id="resultsSection" style="display: none;">
                    <div class="card shadow mb-4">
                        <div class="card-header bg-success text-white">
                            <h5><i class="fas fa-chart-bar"></i> Yield Prediction Results</h5>
                        </div>
                        <div class="card-body">
                            <div class="row text-center">
                                <div class="col-md-6">
                                    <div class="prediction-metric">
                                        <h2 class="text-success" id="predictedYield">-</h2>
                                        <p class="text-muted">Predicted Yield (tons/hectare)</p>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="prediction-metric">
                                        <h2 class="text-info" id="totalProduction">-</h2>
                                        <p class="text-muted">Total Production (tons)</p>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-4">
                                <canvas id="yieldChart" height="100"></canvas>
                            </div>
                            <div class="mt-4">
                                <h6 class="text-primary"><i class="fas fa-lightbulb"></i> AI Recommendations</h6>
                                <div id="recommendationsContainer"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Weather Map Section -->
    <section id="weather-map" class="weather-map-section py-5 bg-light">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center mb-5">
                    <h2 class="display-5 fw-bold">Live Weather Map of India</h2>
                    <p class="lead text-muted">Real-time weather data with interactive map layers</p>
                </div>
            </div>
            
            <div class="row">
                <div class="col-12">
                    <div class="card shadow">
                        <div class="card-header bg-info text-white">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5><i class="fas fa-map"></i> Interactive World Map</h5>
                                <div class="map-info">
                                    <small class="text-light">
                                        <i class="fas fa-search"></i> Enter location above to navigate
                                    </small>
                                    <button type="button" class="btn btn-sm btn-outline-light ms-2" onclick="testWeatherData()">
                                        <i class="fas fa-test-tube"></i> Test
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body p-0">
                            <div id="weatherMap" style="height: 500px; width: 100%;"></div>
                        </div>
                        <div class="card-footer bg-light">
                            <div class="row">
                                <div class="col-md-8">
                                    <div class="map-legend">
                                        <h6><i class="fas fa-info-circle"></i> Location Information</h6>
                                        <div class="row">
                                            <div class="col-3 text-center">
                                                <i class="fas fa-thermometer-half fa-2x text-warning mb-2"></i>
                                                <small>Weather Data</small>
                                            </div>
                                            <div class="col-3 text-center">
                                                <i class="fas fa-seedling fa-2x text-success mb-2"></i>
                                                <small>Soil Information</small>
                                            </div>
                                            <div class="col-3 text-center">
                                                <i class="fas fa-map-marker-alt fa-2x text-primary mb-2"></i>
                                                <small>Location Details</small>
                                            </div>
                                            <div class="col-3 text-center">
                                                <i class="fas fa-lightbulb fa-2x text-info mb-2"></i>
                                                <small>Recommendations</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="map-info">
                                        <h6><i class="fas fa-compass"></i> How to Use</h6>
                                        <small class="text-muted">
                                            <i class="fas fa-edit"></i> Type location in the form above<br>
                                            <i class="fas fa-mouse-pointer"></i> Click anywhere on map for info<br>
                                            <i class="fas fa-search-plus"></i> Zoom to street level<br>
                                            <i class="fas fa-info"></i> View soil & weather details below
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Weather Details Panel -->
            <div class="row mt-4">
                <div class="col-12">
                    <div class="card shadow" id="weatherDetailsCard" style="display: none;">
                        <div class="card-header bg-primary text-white">
                            <h5><i class="fas fa-map-marker-alt"></i> Location Information</h5>
                        </div>
                        <div class="card-body">
                            <div class="row" id="weatherDetailsContent">
                                <!-- Dynamic weather details will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Plant Disease Analysis Section -->
    <section id="plant-analysis" class="plant-analysis-section py-5">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center mb-5">
                    <h2 class="display-5 fw-bold">AI Plant Disease Detection</h2>
                    <p class="lead text-muted">Upload plant images for multi-AI analysis using Hugging Face + Google Gemini AI</p>
                </div>
            </div>
            
            <div class="row">
                <div class="col-12">
                    <div class="card shadow slide-in-right">
                        <div class="card-header bg-warning text-dark">
                            <h5><i class="fas fa-camera"></i> AI Plant Disease Detection</h5>
                            <small><i class="fas fa-robot"></i> Powered by Hugging Face + Google Gemini AI</small>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="upload-area" id="uploadArea">
                                        <div class="upload-content text-center py-4">
                                            <i class="fas fa-cloud-upload-alt fa-3x text-muted mb-3"></i>
                                            <h6>Upload Plant Image for AI Analysis</h6>
                                            <p class="text-muted">Drag & drop or click to select image</p>
                                            <small class="text-info">
                                                <i class="fas fa-info-circle"></i> 
                                                Best results: Clear, well-lit photos of leaves or affected plant parts
                                            </small>
                                            <input type="file" id="plantImage" accept="image/*" class="d-none">
                                            <div class="mt-3">
                                                <button type="button" class="btn btn-outline-primary" onclick="document.getElementById('plantImage').click()">
                                                    <i class="fas fa-upload"></i> Choose Image
                                                </button>
                                            </div>
                                            <div class="mt-2">
                                                <span class="badge bg-primary me-1">Hugging Face</span>
                                                <span class="badge bg-success">Gemini AI</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="imagePreview" class="mt-3" style="display: none;">
                                        <img id="previewImg" class="img-fluid rounded" style="max-height: 300px;">
                                        <div class="mt-2">
                                            <button type="button" class="btn btn-success" id="analyzeBtn">
                                                <i class="fas fa-robot"></i> Multi-AI Analysis
                                            </button>
                                            <button type="button" class="btn btn-secondary" id="clearBtn">
                                                <i class="fas fa-times"></i> Clear
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div id="analysisResults" style="display: none;">
                                        <h6 class="text-success"><i class="fas fa-microscope"></i> AI Analysis Results</h6>
                                        <div id="analysisContent"></div>
                                    </div>
                                    <div id="analysisLoading" style="display: none;" class="text-center py-4">
                                        <div class="spinner-border text-primary" role="status"></div>
                                        <p class="mt-2 text-muted">Running multi-AI analysis...</p>
                                        <small class="text-info">
                                            <i class="fas fa-cog fa-spin"></i> Hugging Face Disease Detection<br>
                                            <i class="fas fa-cog fa-spin"></i> Google Gemini Analysis
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Basic Data Section -->
    <section id="basic-data" class="basic-data-section py-5">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center mb-5">
                    <h2 class="display-5 fw-bold">Agricultural Knowledge Base</h2>
                    <p class="lead text-muted">Essential information to help farmers understand soil types, crops, and irrigation methods</p>
                </div>
            </div>

            <!-- Soil Types -->
            <div class="row mb-5">
                <div class="col-12">
                    <div class="card shadow">
                        <div class="card-header bg-primary text-white">
                            <h3><i class="fas fa-mountain"></i> Soil Types & Best Crops</h3>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="soil-type-card mb-4">
                                        <h5 class="text-success"><i class="fas fa-seedling"></i> Alluvial Soil</h5>
                                        <p><strong>Characteristics:</strong> Rich in nutrients, good water retention, fertile</p>
                                        <p><strong>Best Crops:</strong> Rice, Wheat, Sugarcane, Cotton, Maize</p>
                                        <span class="badge bg-success">Highly Fertile</span>
                                    </div>
                                    <div class="soil-type-card mb-4">
                                        <h5 class="text-dark"><i class="fas fa-circle"></i> Black Soil</h5>
                                        <p><strong>Characteristics:</strong> High clay content, moisture retentive</p>
                                        <p><strong>Best Crops:</strong> Cotton, Sugarcane, Wheat, Jowar</p>
                                        <span class="badge bg-dark">Cotton Soil</span>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="soil-type-card mb-4">
                                        <h5 class="text-danger"><i class="fas fa-circle"></i> Red Soil</h5>
                                        <p><strong>Characteristics:</strong> Iron oxide rich, well-drained</p>
                                        <p><strong>Best Crops:</strong> Millets, Groundnut, Cotton, Pulses</p>
                                        <span class="badge bg-warning">Moderate Fertility</span>
                                    </div>
                                    <div class="soil-type-card mb-4">
                                        <h5 class="text-warning"><i class="fas fa-circle"></i> Laterite Soil</h5>
                                        <p><strong>Characteristics:</strong> High iron and aluminum, acidic</p>
                                        <p><strong>Best Crops:</strong> Cashew, Coconut, Spices</p>
                                        <span class="badge bg-warning">Needs Treatment</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Irrigation Methods -->
            <div class="row">
                <div class="col-12">
                    <div class="card shadow">
                        <div class="card-header bg-info text-white">
                            <h3><i class="fas fa-tint"></i> Irrigation Methods Explained</h3>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="irrigation-card mb-4">
                                        <h5 class="text-success"><i class="fas fa-droplet"></i> Drip Irrigation</h5>
                                        <p><strong>Water Efficiency:</strong> 85-95%</p>
                                        <p><strong>Best For:</strong> High-value crops, water-scarce areas</p>
                                        <div class="progress">
                                            <div class="progress-bar bg-success" style="width: 90%"></div>
                                        </div>
                                    </div>
                                    <div class="irrigation-card mb-4">
                                        <h5 class="text-primary"><i class="fas fa-spray-can"></i> Sprinkler Irrigation</h5>
                                        <p><strong>Water Efficiency:</strong> 70-80%</p>
                                        <p><strong>Best For:</strong> Field crops, uneven terrain</p>
                                        <div class="progress">
                                            <div class="progress-bar bg-primary" style="width: 75%"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="irrigation-card mb-4">
                                        <h5 class="text-info"><i class="fas fa-circle-dot"></i> Tube Well</h5>
                                        <p><strong>Water Efficiency:</strong> 60-70%</p>
                                        <p><strong>Best For:</strong> Areas with good groundwater</p>
                                        <div class="progress">
                                            <div class="progress-bar bg-info" style="width: 65%"></div>
                                        </div>
                                    </div>
                                    <div class="irrigation-card mb-4">
                                        <h5 class="text-warning"><i class="fas fa-cloud-rain"></i> Rainfed</h5>
                                        <p><strong>Water Efficiency:</strong> Variable</p>
                                        <p><strong>Best For:</strong> Areas with adequate rainfall</p>
                                        <div class="progress">
                                            <div class="progress-bar bg-warning" style="width: 60%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Research Section -->
    <section id="research" class="research-section py-5 bg-light">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center mb-5">
                    <h2 class="display-5 fw-bold">Research & Data Integration</h2>
                    <p class="lead text-muted">Explore how we integrate Kaggle datasets and advanced technologies</p>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-4 mb-4">
                    <div class="dataset-card">
                        <div class="dataset-header bg-info text-white p-3 rounded-top">
                            <h5><i class="fas fa-map-marked-alt"></i> Indian Postal Codes</h5>
                        </div>
                        <div class="dataset-body p-3 border rounded-bottom">
                            <p><strong>Records:</strong> 150,000+ postal codes</p>
                            <p><strong>Usage:</strong> Location validation and geocoding</p>
                            <span class="badge bg-success">Active</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 mb-4">
                    <div class="dataset-card">
                        <div class="dataset-header bg-success text-white p-3 rounded-top">
                            <h5><i class="fas fa-seedling"></i> Crop Production Data</h5>
                        </div>
                        <div class="dataset-body p-3 border rounded-bottom">
                            <p><strong>Records:</strong> 250,000+ crop records</p>
                            <p><strong>Usage:</strong> Yield benchmarking and analysis</p>
                            <span class="badge bg-success">Active</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 mb-4">
                    <div class="dataset-card">
                        <div class="dataset-header bg-warning text-dark p-3 rounded-top">
                            <h5><i class="fas fa-globe"></i> FAO Soil Dataset</h5>
                        </div>
                        <div class="dataset-body p-3 border rounded-bottom">
                            <p><strong>Coverage:</strong> Global soil properties</p>
                            <p><strong>Usage:</strong> Soil classification and analysis</p>
                            <span class="badge bg-warning">Reference</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5><i class="fas fa-seedling me-2"></i>AgriPredict</h5>
                    <p class="text-muted">Empowering farmers with AI-driven agricultural insights and satellite technology.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="text-muted mb-0">&copy; 2024 AgriPredict. All rights reserved.</p>
                    <small class="text-muted">Powered by Google Earth Engine & Kaggle Datasets</small>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    <script src="{{ url_for('static', filename='js/weather-map.js') }}"></script>
    <script>
        AOS.init({
            duration: 1000,
            once: true
        });
    </script>
</body>
</html>